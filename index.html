<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Secret Anonymous Board</title>
<style>
  body { font-family: Arial; background: #121212; color: #eee; padding: 20px; display: flex; justify-content: center; }
  #container { width: 500px; }
  .hidden { display: none; }
  input { width: 100%; padding: 8px; margin: 5px 0; border-radius: 5px; border: none; }
  button { padding: 8px 12px; border-radius: 5px; border: none; background: #6200ee; color: white; cursor: pointer; }
  button:hover { background: #3700b3; }
  #messages { border: 1px solid #444; padding: 10px; height: 300px; overflow-y: scroll; margin-bottom: 10px; border-radius: 8px; background: #1e1e1e; }
  #logoutBtn { margin-top: 10px; background: #b00020; }
  #logoutBtn:hover { background: #7f0000; }
</style>
</head>
<body>
<div id="container">

  <!-- Login Form -->
  <div id="loginForm">
    <h2>Login</h2>
    <input type="text" id="username" placeholder="Username">
    <input type="password" id="password" placeholder="Password">
    <button id="loginBtn">Login</button>
    <p id="loginError" style="color:red;"></p>
  </div>

  <!-- Message Board -->
  <div id="board" class="hidden">
    <h2>Secret Anonymous Board</h2>
    <div id="messages">Loading messages...</div>
    <input type="text" id="msgInput" placeholder="Type your message...">
    <button id="sendBtn">Send</button>
    <button id="logoutBtn">Logout</button>
  </div>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
import { getDatabase, ref, onValue, push } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";

// ðŸ”¹ Obfuscated credentials
const encUserParts = ["Z3", "Jv", "dXAy", "Ng=="]; // Base64 parts of reversed "group26"
const encPassParts = ["Nj", "Y2", "Ng=="];           // Base64 parts of "666"

// ðŸ”¹ Obfuscated Firebase config (Base64 + split + reversed)
const encFirebaseParts = [
  "eyJhcGlLZXkiOiAiQUl6YV",
  "N5RDdjZEt2TWl1OUxOMj",
  "c1WmlNUHc",
  "3emUsc2VkM0tvVw==",
  "IiwiYXV0aERvbWFpbiI6",
  "ICJzZWMtOTExYzIuZmli",
  "cmVhcHBhcHAuY29tIiwi",
  "ZGF0YWJhc2VVUkwiOiAiaHR0cHM6Ly9zZWMtOTExYzItZGVmYXVsdC1ydG",
  "RiLmFzaWEtc291dGhlYXN0MS5maXJlYmFzZWRhdGFiYXNlLmFwcCIsInByb2plY3RJZCI6ICJzZWMtOTExYzIiLCJzdG9yYWdlQnVja2V0IjogInNlYy05MTFjMi5maXJlYmFzdGVzdG9yYWdlLmFwcCIsIm1lc3NhZ2luZ1NlbmRlcklkIjogIjkzNzczMjAxNTA2MiIsImFwcElkIjogIjE6OTM3NzMyMDE1MDYyOndlYjphYzQwYjNjNjFlOTY3ODlmMDE1YTc3IiwibWVhc3VyZW1lbnRJZCI6ICJHLU4zVlAyMDhPUk0ifQ=="
];

// Decode credentials
function decode(parts) {
  return atob(parts.join("")).split("").reverse().join("");
}

const actualUser = decode(encUserParts);
const actualPass = decode(encPassParts);

// Decode Firebase config
const firebaseConfig = JSON.parse(atob(encFirebaseParts.join("")));

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// DOM Elements
const loginForm = document.getElementById("loginForm");
const loginBtn = document.getElementById("loginBtn");
const loginError = document.getElementById("loginError");

const board = document.getElementById("board");
const messagesDiv = document.getElementById("messages");
const msgInput = document.getElementById("msgInput");
const sendBtn = document.getElementById("sendBtn");
const logoutBtn = document.getElementById("logoutBtn");

// ðŸ”¹ Login Logic
loginBtn.onclick = () => {
  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();

  if(username === actualUser && password === actualPass) {
    loginForm.classList.add("hidden");
    board.classList.remove("hidden");
    startBoard();
  } else {
    loginError.textContent = "Wrong username or password!";
  }
};

// ðŸ”¹ Board Logic
function startBoard() {
  const messagesRef = ref(db, "messages");

  onValue(messagesRef, (snapshot) => {
    const data = snapshot.val();
    messagesDiv.innerHTML = "";
    if (data) {
      Object.values(data).forEach(msg => {
        const p = document.createElement("p");
        p.textContent = msg.text;
        messagesDiv.appendChild(p);
      });
    } else {
      messagesDiv.innerHTML = "No messages yet.";
    }
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
  });

  sendBtn.onclick = () => {
    const text = msgInput.value.trim();
    if (!text) return;
    push(messagesRef, { text, timestamp: Date.now() });
    msgInput.value = "";
  };
}

// ðŸ”¹ Logout
logoutBtn.onclick = () => {
  board.classList.add("hidden");
  loginForm.classList.remove("hidden");
  document.getElementById("username").value = "";
  document.getElementById("password").value = "";
};
</script>
</body>
</html>
