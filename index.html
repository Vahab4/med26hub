<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Secret Anonymous Board</title>
<style>
  body { font-family: Arial, sans-serif; background: #f0f0f0; padding: 20px; }
  #board { background: red; color: white; padding: 20px; height: 300px; overflow-y: scroll; margin-bottom: 10px; }
  #message { width: 70%; padding: 10px; }
  #sendBtn { padding: 10px 20px; }
</style>
</head>
<body>

<h1>Secret Anonymous Board</h1>

<div id="board">Loading messages...</div>

<input type="text" id="message" placeholder="Type your secret message..." />
<button id="sendBtn">Send</button>

<script>
const webAppUrl = "YOUR_WEB_APP_URL_HERE"; // <-- replace with your Web App URL

// Load all messages
async function loadMessages() {
  try {
    const res = await fetch(webAppUrl);
    const messages = await res.json();
    const board = document.getElementById("board");
    board.innerHTML = messages.map(msg => `<div>${msg}</div>`).join('');
    board.scrollTop = board.scrollHeight;
  } catch (e) {
    document.getElementById("board").innerText = "Unable to load messages.";
    console.error(e);
  }
}

// Send a new message
document.getElementById("sendBtn").addEventListener("click", async () => {
  const input = document.getElementById("message");
  const msg = input.value.trim();
  if (!msg) return;

  try {
    await fetch(webAppUrl, {
      method: "POST",
      headers: { "Content-Type": "application/x-www-form-urlencoded" },
      body: `message=${encodeURIComponent(msg)}`
    });
    input.value = "";
    loadMessages();
  } catch (e) {
    alert("Failed to send message");
    console.error(e);
  }
});

// Refresh messages every 5 seconds
setInterval(loadMessages, 5000);
loadMessages();
</script>

</body>
</html>
